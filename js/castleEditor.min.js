var Class={extend:function(i,t){var e=this.prototype||Class,n=Object.create(e),s=(Class.copyOwnTo(i,n),i.constructor);s.prototype=n,s["super"]=e,s.extend=this.extend;for(var o in t)s[o]=t[o];return s},copyOwnTo:function(i,t){var e=!1;if(Object.getOwnPropertyNames(i).forEach(function(n){"constructor"===n&&(e=!0),Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}),!e)throw new Error("You must define a method 'constructor'")}},Resources=Class.extend({constructor:function(i){this._loaded={},i&&this.loadRecources(i)},_copy:function(i){var t=i.constructor();for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},hasRecourse:function(i){return this._loaded.hasOwnProperty(i)},keys:function(){var i=[];for(var t in this._loaded)i.push(t);return i},get:function(i){return this.hasRecourse(i)?this._loaded[i]:!1},loadRecource:function(i,t){var e=this._copy(t);return this.hasRecourse(i)?!1:(this._loaded[i]=e,e.name=i,e.imageSrc=t.image,e.image=new Image,e.image.src=t.image,!0)},loadRecources:function(i){for(var t in i)this.loadRecource(t,i[t])}}),Building={Type:{},Resource:{STONE:0,WOOD:1,IRON:2,GOLD:3},set:function(i){var t,e,n,s,o=i.keys();for(t=0,e=o.length;e>t;t++)n=o[t],s=i.get(n),s.hasOwnProperty("max")&&(Building.Type[n.toUpperCase()]=new BuildingType(n.toUpperCase(),s.colour,s.dimension,s.gapRequired,s.resourceCosts,s.buildTime,s.max))}},BuildingType=Class.extend({constructor:function(i,t,e,n,s,o,r){this._ordinal=i,this._colour=t,this._dimension=e,this._gapRequired=n,this._buildTime=o,this._maxBuildings=r,this._buildingResources=new Map,this._buildingResources.set(Building.Resource.STONE,s[0]),this._buildingResources.set(Building.Resource.WOOD,s[1]),this._buildingResources.set(Building.Resource.IRON,s[2]),this._buildingResources.set(Building.Resource.GOLD,s[3])},getOrdinal:function(){return this._ordinal},getHotspot:function(){return{x:Math.floor((this._dimension.width-1)/2),y:Math.floor((this._dimension.height-1)/2)}},getColour:function(){return this._colour},getDimension:function(){return this._dimension},getGapRequired:function(){return this._gapRequired},getCost:function(i){return this._buildingResources.get(i)},getBuildTime:function(){return this._buildTime},getMaxBuildings:function(){return this._maxBuildings}}),TileBuilding=Class.extend({constructor:function(i,t){this._buildingType=i,this._buildingId=t},getBuildingType:function(){return this._buildingType},getBuildingId:function(){return this._buildingId},setBuildingId:function(i){this._buildingId=i},toString:function(){return this._buildingType.getOrdinal().substring(0,2)+","+this._buildingId}}),Grid=Class.extend({constructor:function(i){this._map=[],this._length=i.width*i.height,this._dimension=i,this.reset()},reset:function(){this._map=[],this.setValues(void 0,this.getKeys())},setValue:function(i,t){var e=this._getIndex(t);-1!==e&&(this._map[e]=i)},setValues:function(i,t){var e,n;for(e=0,n=t.length;n>e;e++)Array.isArray(i)?this.setValue(i[e],t[e]):this.setValue(i,t[e])},getKeys:function(i,t,e){var n=[],s=0;return this.loop(function(i,t){n[s++]=t},i,t,e),n},getValue:function(i){return this._map[this._getIndex(i)]},getValues:function(i){var t,e,n=[];for(t=0,e=i.length;e>t;t++)n[t]=this.getValue(i[t]);return n},removeValue:function(i){var t=this.getValue(i);return this.setValue(void 0,i),t},removeValues:function(i){var t,e,n=[];for(t=0,e=i.length;e>t;t++)n[t]=this.removeValue(i[t]);return n},swapValue:function(i,t){var e=this.removeValue(i),n=this.removeValue(t);this.setValue(e,t),this.setValue(n,i)},swapValues:function(i,t){var e,n;if(i.length===t.length)for(e=0,n=i.length;n>e;e++)this.swapValue(i[e],t[e])},moveValue:function(i,t){var e=this.removeValue(i);this.setValue(e,t)},moveValues:function(i,t){var e,n;if(i.length===t.length)for(e=0,n=i.length;n>e;e++)this.moveValue(i[e],t[e])},hasValue:function(i){var t=this._getIndex(i);return void 0!==this.getValue(i)&&this._insideGrid(t)?!0:!1},_insideGrid:function(i){return i>=0&&i<this._length},_getIndex:function(i){return"object"!=typeof i?i:i.hasOwnProperty("x")&&i.hasOwnProperty("y")?i.x+i.y*this._dimension.width:-1},getCoord:function(i){var t=Math.floor(i/this._dimension.width),e=i-t*this._dimension.width;return this._insideGrid(i)?{x:e,y:t}:{x:-1,y:-1}},loop:function(i,t,e,n){var s=t||{x:0,y:0},o=e||this._dimension;if("undefined"==typeof n)this._loopAtCoord(i,s,o);else{"string"==typeof n&&(n=parseFloat(n));var r=e;switch(n){case 360:case 0:case 400:case 2*Math.PI:this._loopCol(i,t,r,"v+");break;case 90:case 100:case Math.PI/2:this._loopRow(i,t,r,"h+");break;case 180:case 200:case Math.PI:this._loopCol(i,t,r,"v-");break;case 270:case 300:case 3*Math.PI/2:this._loopRow(i,t,r,"h-");break;case 45:case 50:case Math.PI/4:this["--++"](i,t,r);break;case 135:case 150:case 3*Math.PI/4:this["++++"](i,t,r);break;case 225:case 250:case 5*Math.PI/4:this["++--"](i,t,r);break;case 315:case 350:case 7*Math.PI/4:this["----"](i,t,r);break;default:console.error("direction doesnt exist",n)}}},_loopAtCoord:function(i,t,e){var n,s,o,r=!1,a={x:t.x+e.width,y:t.y+e.height};for(s=t.y;s<a.y&&!r;s++)for(n=t.x;n<a.x;n++)if(n>=0&&n<this._dimension.width&&s>=0&&s<this._dimension.height&&(o=this._getIndex({x:n,y:s}),-1===i.call(this,this.getValue(o),o))){r=!0;break}},_loopRow:function(i,t,e){var n;for(void 0===e&&(e=this._dimension.x-t.x),n=t.x;n<t.x+e;n++)this.callback(i,n,t.y)},_loopCol:function(i,t,e){var n;for(void 0===e&&(e=this._dimension.y-t.y),n=t.y;n<t.y+e;n++)this.callback(i,t.x,n)},"++++":function(i,t,e){var n,s=t.x,o=t.y;for(n=0;e>n;n++)this.callback(i,++s,++o)},"----":function(i,t,e){var n,s=t.x,o=t.y;for(n=0;e>n;n++)this.callback(i,--s,--o)},"++--":function(i,t,e){var n,s=t.x,o=t.y;for(n=0;e>n;n++)this.callback(i,++s,--o)},"--++":function(i,t,e){var n,s=t.x,o=t.y;for(n=0;e>n;n++)this.callback(i,--s,++o)},_f:function(i,t,e){return{x:i(t.x,e.x),y:i(t.y,e.y)}},min:function(i,t){return this._f(Math.min,i,t)},max:function(i,t){return this._f(Math.max,i,t)},getDimension:function(){return this._dimension},getLength:function(){return this._length},toString:function(){var i="";return this.loop(function(t,e){"\n"!==i.substring(i.length-1,i.length)&&0!==i.length&&(i+=" "),i+="object"==typeof t?t.toString():"undefined"==typeof t?"un":t,this.getCoord(e).x===this._dimension.width-1&&(i+="\n")}),i}},{DIRECTION:{"v-":360,"v-h+":45,"--++":45,"v+":90,"v+h+":135,"++++":135,"h+":180,"v+h-":225,"++--":225,"h-":270,"v-h-":315,"----":315}}),Castle=Class.extend({constructor:function(i,t){this._dimension=i||{width:Castle.CASTLE_BOUNDRY_LENGTH,height:Castle.CASTLE_BOUNDRY_LENGTH},this._grid=new Grid(this._dimension),this._lastIdUsed=9,this._totalBuildingTime=0,this._buildingQuantities=new Map,this._buildingResources=new Map,this._callStack=[],this._callStackCurrent=-1,this._callStackLength=t||10,this._selectedBuilding=Building.Type.STONE_WALL},addBuilding:function(i,t,e,n){"undefined"==typeof e&&(e=this._getNewId());var s=this._setSelectedBuilding(t),o=new TileBuilding(s,e),r=this._grid.getKeys(i,s.getDimension());return this._grid.setValues(o,r),n!==!1&&this._updateDesignStats(),e},removeBuilding:function(i,t){var e=this._grid.getValue(i);e instanceof TileBuilding||console.error("tileBuilding is incorrect"),this._setSelectedBuilding(e.getBuildingType().getOrdinal());var n=(e.getBuildingId(),this._grid.getKeys(this._getBaseCoord(i),e.getBuildingType().getDimension()));return this._grid.removeValues(n),t!==!1&&this._updateDesignStats(),e},addBuildings:function(i,t){var e,n,s,o=[];for(e=0,n=i.length;n>e;e++)s=this._getNewId(),this.addBuilding(i[e],t,s,!1),o.push(s);return i.length>0&&this._updateDesignStats(),o},removeBuildings:function(i){var t,e;for(t=0,e=i.length;e>t;t++)this.removeBuilding(i[t],!1);i.length>0&&this._updateDesignStats()},reset:function(){var i=this;this._grid.reset(),this._buildingQuantities=new Map,this._forEach(Building.Type,function(t,e){i._buildingQuantities.set(e,0)})},_getBaseCoord:function(i){var t,e=this._grid.getValue(i),n=i.x,s=i.y;if(void 0===e)return{x:-1,y:-1};for(;n>=0&&(t=this._grid.getValue({x:n-1,y:s}),t===e);)n--;for(;s>=0&&(t=this._grid.getValue({x:n,y:s-1}),t===e);)s--;return{x:n,y:s}},getNumberOfBuildings:function(i){return this._buildingQuantities.get(i)},getTotalResource:function(i){return this._buildingResources.get(i)},getTotalBuildingTime:function(){return this._totalBuildingTime},getGrid:function(){return this._grid},_getNewId:function(){return++this._lastIdUsed},_updateDesignStats:function(){var i=new Map;this._totalBuildingTime=0,this._forEach(Building.Resource,function(i){this._buildingResources.set(i,0)},this),this._forEach(Building.Type,function(t,e){i.set(e,0)},this),this._grid.loop(function(t){if(void 0!==t){var e=t.getBuildingType();i.set(e.getOrdinal(),i.get(e.getOrdinal())+1)}}),this._forEach(Building.Type,function(t,e){var n=this._calculateNumberOfBuildings(t,i.get(e));this._buildingQuantities.set(e,n),this._forEach(Building.Resource,function(i){var e=this._buildingResources.get(i)+t.getCost(i)*n;this._buildingResources.set(i,e)},this),this._totalBuildingTime+=t.getBuildTime()*n},this)},_calculateNumberOfBuildings:function(i,t){var e=i.getDimension();return Math.floor(t/(e.width*e.height))},backward:function(){var i;return-1===this._callStackCurrent?!1:(i=this._callStack[this._callStackCurrent],this._grid[i.action.backward](i.argsFirst,i.argSecond),this._callStackCurrent>0&&this._callStackCurrent--,!0)},forward:function(){var i;return-1===this._callStackCurrent?!1:(i=this._callStack[this._callStackCurrent],this._grid[i.action.forward](i.argsFirst,i.argSecond),this._callStackCurrent<this._callStackLength&&this._callStackCurrent++,!0)},_push:function(i){this._callStack.length>=this._callStackLength?this._callStack.splice(0,1):this._callStackCurrent++,this._callStack.push(i)},_setSelectedBuilding:function(i){"undefined"==typeof i&&console.error("Invalid argument undefined to setSelectedBuilding");var t=Building.Type[i.toUpperCase()];return this._selectedBuilding=t,t},getEmptyCoord:function(i){var t=!1,e=this;return this._setSelectedBuilding(i),this._grid.loop(function(n,s){var o=e._grid.getCoord(s);return e.isValidCoord(o,i)&&t===!1?(t=o,-1):void 0}),t},isValidCoord:function(i,t){return this._setSelectedBuilding(t),this._fitsinGrid(i)&&this._isBuildable(i)&&this._hasMaxBuildings()?this._selectedBuilding.getGapRequired()?this._isGapSatisfied(i):!0:!1},_fitsinGrid:function(i){var t=this._selectedBuilding.getDimension();return i.x>=0&&i.y>=0&&i.x<=this._dimension.width-t.width&&i.y<=this._dimension.height-t.height},_isBuildable:function(i){var t=this._selectedBuilding.getDimension(),e=!0;return this._grid.loop(function(i){return void 0!==i&&i.getBuildingType()!==Building.Type.WOODEN_WALL&&i.getBuildingType()!==Building.Type.STONE_WALL?(e=!1,-1):void 0},i,t),e},_isGapSatisfied:function(i){var t=this._selectedBuilding.getDimension(),e=!0,n={x:i.x-1,y:i.y-1},s={width:t.width+2,height:t.height+2};return this._grid.loop(function(i){return void 0!==i&&i.getBuildingType().getGapRequired()?(e=!1,-1):void 0},n,s),e},_hasMaxBuildings:function(){var i=this._selectedBuilding.getMaxBuildings();return-1===i||this.getNumberOfBuildings(this._selectedBuilding.getOrdinal())<i?!0:!1},_forEach:function(i,t,e){Object.keys(i).sort().forEach(function(n,s){t.call(e,i[n],n,s)})}},{CASTLE_BOUNDRY_LENGTH:52}),BuildingPanel=Class.extend({constructor:function(i,t,e,n){this.resources=i,this._target=$("#"+t),this._dimension=e||{width:2,height:7},this._button=n||{width:100,height:70},this._materials=["STONE","WOOD","IRON","GOLD"]},set:function(t){this._callback=t;var e=this._sortKeys();for(i=0,j=e.length;i<j;i++)this.addButton(e[i]);this.addDivider(),this.addButton("eraser"),this.addDivider()},addButton:function(i){var t,e=$("<button name='"+i+"' title='"+this._cleanUp(i)+"'></buttons>"),n=this.resources.get(i);n&&(t={width:Editor.getPixels(n.dimension.width),height:Editor.getPixels(n.dimension.height)},e.click(this._callback),e.css({position:"relative",background:"url("+n.image.src+") no-repeat",backgroundSize:"100%",width:t.width,height:t.height,margin:"auto",left:(this._button.width-t.width)/2,top:(this._button.height-t.height)/2}),this._setElement(e))},addDivider:function(){var i=$("<hr>");this._setElement(i,{width:this._dimension.width*this._button.width,height:5})},_setElement:function(i,t){var e=$("<div></div>");void 0===t&&(t=this._button),e.css({"float":"left",width:t.width,height:t.height}),e.append(i),this._target.append(e)},_largestMaterial:function(i){var t,e,n=0;for(t=1,e=i.length;e>t;t++)i[t-1]<i[t]&&(n=t);return this._materials[n]},_sortKeys:function(){var i,t,e,n={STONE:[],WOOD:[],IRON:[],GOLD:[]},s=this.resources.keys();for(i=0;i<s.length;i++)t=s[i],e=this.resources.get(t),e.hasOwnProperty("resourceCosts")&&"keep"!==t&&n[this._largestMaterial(e.resourceCosts)].push(t);return n.STONE.concat(n.WOOD.concat(n.IRON.concat(n.GOLD)))},_cleanUp:function(i){var t=i.indexOf("_");return 0>t?i:i.substring(0,t)+" "+i.substring(t+1,i.length)}}),LandPanel=Class.extend({constructor:function(i,t,e,n){this.resources=i,this._target=t,this._dimension=e||{width:676,height:676},this._gridOffset=n||{x:0,y:0},this._radius=4,this._edge=4,this._stage=new Konva.Stage({container:this._target,width:this._dimension.width,height:this._dimension.height}),this._layer=new Konva.Layer,this._dragLayer=new Konva.Layer,this._stage.add(this._layer,this._dragLayer)},addBuilding:function(i,t,e,n,s){var o=this.create(t.toLowerCase(),!n,e);o.setPosition(Editor.getPosition(i)),"keep"===t.toLowerCase()&&o.setAttr("draggable",!1),s!==!1&&this.repaint()},removeBuilding:function(i,t){var e=this._findBuilding(i);void 0!==e&&e.destroy(),t!==!1&&this.repaint()},addBuildings:function(i,t,e,n){var s,o;for(s=0,o=i.length;o>s;s++)this.addBuilding(i[s],t,e[s],n,!1);i.length>0&&this.repaint()},removeBuildings:function(i){var t,e;for(t=0,e=i.length;e>t;t++)this.removeBuilding(i[t],!1);i.length>0&&this.repaint()},_findBuilding:function(i){return"#"!==i.toString().charAt(0)&&(i="#"+i),this._stage.find(i)[0]},setPosition:function(i,t){i.setPosition(t)},create:function(i,t,e){var n=this.resources.get(i.toLowerCase()),s=Editor.getPosition({x:n.dimension.width,y:n.dimension.height});void 0===e&&(e="limbo");var o={id:e,image:n.image,width:s.x,height:s.y,draggable:!0,rotation:0,startScale:1,buildingName:i.toUpperCase()};t&&(o.shapeshadowColor="black",o.shadowBlur=10,o.shadowOffset={x:5,y:5},o.shadowOpacity=.6);var r=new Konva.Image(o);return this._layer.add(r),r},remove:function(i){this.removeBuilding(i.getAttr("id"))},clickBuilding:function(i,t){var e=new Konva.Circle({x:i.getX()+i.getWidth()-this._radius/2-this._edge,y:i.getY()+this._radius/2+this._edge,radius:this._radius,fill:"red",stroke:"black",strokeWidth:1,del:t,id:5});return this._layer.add(e),this.repaint(),e.getAttr("id")},dragstartBuilding:function(i){i.moveTo(this._dragLayer),this.repaint(),i.setAttrs({shadowOffset:{x:15,y:15},scale:{x:i.getAttr("startScale"),y:i.getAttr("startScale")}})},dragendBuilding:function(i){i.moveTo(this._layer),this.repaint(),i.to({duration:.5,easing:Konva.Easings.ElasticEaseOut,scaleX:i.getAttr("startScale"),scaleY:i.getAttr("startScale"),shadowOffsetX:5,shadowOffsetY:5})},reset:function(){this._layer.getChildren().destroy()},repaint:function(){this._stage.children[0].batchDraw()},getStage:function(){return this._stage},getDimension:function(){return this._dimension},getGridOffset:function(){return this._gridOffset}}),Editor=Class.extend({constructor:function(i,t,e){this.resources=i,this._version="0.1",this._castle=new Castle,this._landPanel=new LandPanel(i,t),this._buildingPanel=new BuildingPanel(i,e),this.set(),this.reset()},set:function(){var i,t,e=this,n=this._landPanel.getStage(),s={},o={},r=!1,a=!1,d=!1,u=!1,l=!1,h="",g={},c={};this._buildingPanel.set(function(){h=this.name,(l||u)&&(e._landPanel.remove(i),l=!1,u=!1),"eraser"===h&&(u=!0),i=e._landPanel.create(h,!0),s={x:i.attrs.width/2,y:i.attrs.height/2},l=!0,e._landPanel.dragstartBuilding(i)}),n.on("contentMousedown.proto",function(i){i.evt.preventDefault(),d||(r=!0,g=e.getCoord(n.getPointerPosition()))}),n.on("contentMousemove.proto",function(){if(l&&!r&&!d){var t=n.getPointerPosition();o={x:t.x-s.x,y:t.y-s.y},i.setPosition(o),n.children[1].batchDraw()}r&&(a=!0)}),n.on("contentMouseup.proto",function(t){var s,c=t.evt;c.preventDefault(),2===c.button&&(e._landPanel.remove(i),l=!1,u=!1),0!==c.button||d||(u&&a?(s=e.getCoord(n.getPointerPosition()),e.removeBuildings(g,s)):u?(s=e.getCoord(n.getPointerPosition()),e.removeBuilding(s)):a?(s=e.getCoord(n.getPointerPosition()),e.addBuildings(g,s,h)):l&&(s=e.getCoord(o),e.addBuilding(s,h))),r=!1,a=!1}),n.on("dragstart",function(i){if(!l&&!u){var n=i.target;g=e.getCoord(n.getPosition()),t=e._castle.removeBuilding(g,!1),e._landPanel.dragstartBuilding(n),d=!0}}),n.on("dragend",function(i){if(!l&&!u){var n=i.target,s=t.getBuildingType().getOrdinal();c=e.getCoord(n.getPosition()),e._castle.isValidCoord(c,s)?(e._castle.addBuilding(c,s,t.getBuildingId()),e._landPanel.setPosition(n,Editor.getPosition(c))):(e._castle.addBuilding(g,s,t.getBuildingId()),e._landPanel.setPosition(n,Editor.getPosition(g))),e._landPanel.dragendBuilding(n)}d=!1}),n.on("mouseover",function(i){i.target.getAttr("draggable")&&!l&&(document.body.style.cursor="pointer")}),n.on("mouseout",function(){document.body.style.cursor="default"})},addBuilding:function(i,t,e){return void 0===i&&console.error("coord is undefined"),this._castle.isValidCoord(i,t)?(e=this._castle.addBuilding(i,t,e),this._landPanel.addBuilding(i,t,e,this.isSingleTile(t)),!0):!1},removeBuilding:function(i){if(void 0!==this._castle._grid.getValue(i)){var t=this._castle.removeBuilding(i);return this._landPanel.removeBuilding(t.getBuildingId()),t}},moveBuilding:function(i,t,e){var n=this._castle.removeBuilding(i,!1);n.getBuildingId()!==e&&console.error("not the correct building",e,n.getBuildingId()),this._castle.addBuilding(t,n.getBuildingType().getOrdinal(),n.getBuildingId())},addBuildings:function(i,t,e){var n,s,o=this,r=this._castle.getGrid(),a=r.min(i,t),d=r.max(i,t),u={width:d.x-a.x,height:d.y-a.y},l=[],h=[],g=[];for(r.loop(function(i,t){var e=r.getCoord(t);i instanceof TileBuilding||l.push(e),i instanceof TileBuilding&&o.isSingleTile(i.getBuildingType().getOrdinal())&&(g.push(i.getBuildingId()),h.push(e),l.push(e))},a,u),n=0,s=h.length;s>n;n++)this.removeBuilding(h[n]);for(n=0,s=l.length;s>n;n++)this.addBuilding(l[n],e)},removeBuildings:function(i,t){var e=this._castle.getGrid(),n=e.min(i,t),s=e.max(i,t),o={width:s.x-n.x,height:s.y-n.y},r=[],a=[];e.loop(function(i,t){void 0!==i&&(r.push(i.getBuildingId()),a.push(e.getCoord(t)))},n,o),this._landPanel.removeBuildings(r),this._castle.removeBuildings(a)},reset:function(){var i="KEEP";this._castle.reset(),this._landPanel.reset(),this.addBuilding({x:22,y:22},i,0)},getCoord:function(i){var t=this._landPanel.getGridOffset(),e=Math.round((i.x-t.x)/Editor.PIXELS),n=Math.round((i.y-t.y)/Editor.PIXELS);return 0>=e&&(e=0),0>=n&&(n=0),{x:e<Castle.CASTLE_BOUNDRY_LENGTH?e:Castle.CASTLE_BOUNDRY_LENGTH-1,y:n<Castle.CASTLE_BOUNDRY_LENGTH?n:Castle.CASTLE_BOUNDRY_LENGTH-1}},isSingleTile:function(i){return i=i.toUpperCase(),"KILLING_PIT"===name||"MOAT"===i||"STONE_WALL"===i||"WOODEN_WALL"===i}},{PIXELS:13,getPixels:function(i){return Editor.PIXELS*i},getPosition:function(i){return{x:Math.floor(i.x*Editor.PIXELS),y:Math.floor(i.y*Editor.PIXELS)}}});$(document).ready(function(){var i={ballista_tower:{buildTime:18e3,colour:"230,200,60",dimension:{width:3,height:3},gapRequired:!1,image:"images/ballista_tower.png",max:10,resourceCosts:[0,1e4,0,0]},great_tower:{buildTime:86400,colour:"200,200,200",dimension:{width:5,height:5},gapRequired:!0,image:"images/great_tower.png",max:-1,resourceCosts:[2500,0,0,0]},guard_house:{buildTime:10800,colour:"255,200,180",dimension:{width:3,height:3},gapRequired:!1,image:"images/guard_house.png",max:38,resourceCosts:[0,400,0,0]},keep:{buildTime:0,colour:"0, 0, 0",dimension:{width:8,height:8},gapRequired:!1,image:"images/keep.png",max:1,resourceCosts:[0,0,0,0]},killing_pit:{buildTime:3600,colour:"120,100,0",dimension:{width:1,height:1},gapRequired:!1,image:"images/killing_pit.png",max:-1,resourceCosts:[0,0,100,0]},large_tower:{buildTime:57600,colour:"200,200,200",dimension:{width:4,height:4},gapRequired:!0,image:"images/large_tower.png",max:-1,resourceCosts:[1500,0,0,0]},lookout_tower:{buildTime:14400,colour:"200,200,200",dimension:{width:2,height:2},gapRequired:!0,image:"images/lookout_tower.png",max:-1,resourceCosts:[300,0,0,0]},moat:{buildTime:900,colour:"0,200,255",dimension:{width:1,height:1},gapRequired:!1,image:"images/moat.png",max:500,resourceCosts:[0,0,0,20]},small_tower:{buildTime:28800,colour:"200,200,200",dimension:{width:3,height:3},gapRequired:!0,image:"images/small_tower.png",max:-1,resourceCosts:[800,0,0,0]},smelter:{buildTime:21600,colour:"200,30,30",dimension:{width:4,height:4},gapRequired:!1,image:"images/smelter.png",max:-1,resourceCosts:[0,0,400,0]},stone_gatehouse:{buildTime:7200,colour:"100,100,100",dimension:{width:3,height:3},gapRequired:!0,image:"images/stone_gatehouse.png",max:-1,resourceCosts:[500,0,0,0]},stone_wall:{buildTime:900,colour:"230,230,230",dimension:{width:1,height:1},gapRequired:!1,image:"images/stone_wall.png",max:-1,resourceCosts:[100,0,0,0]},turret:{buildTime:14400,colour:"0,0,80",dimension:{width:2,height:2},gapRequired:!1,image:"images/turret.png",max:10,resourceCosts:[2e3,0,0,0]},wooden_gatehouse:{buildTime:3600,colour:"100,50,0",dimension:{width:3,height:3},gapRequired:!0,image:"images/wooden_gatehouse.png",max:-1,resourceCosts:[0,200,0,0]},wooden_tower:{buildTime:10800,colour:"125,58,0",dimension:{width:2,height:2},gapRequired:!1,image:"images/wooden_tower.png",max:-1,resourceCosts:[0,200,0,0]},wooden_wall:{buildTime:225,colour:"150,75,0",dimension:{width:1,height:1},gapRequired:!1,image:"images/wooden_wall.png",max:-1,resourceCosts:[0,20,0,0]},eraser:{dimension:{width:2,height:2},image:"images/eraser.png"}},t=new Resources(i);Building.set(t);new Editor(t,"container","buildings")});